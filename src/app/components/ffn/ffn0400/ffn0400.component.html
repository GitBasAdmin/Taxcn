<style>
	
</style>
<app-menu></app-menu>
<div style="width:100%;height:100%;" id="div-wraper" >
	<div class="content" style="padding:10px;" >
		<div class="card card-info" style="box-shadow: none !important;">
			<div class="" style="height:40px;border-radius: 4px;border:1px solid #17a2b8 !important;background-color: #e1f6f9;">
				<app-case-header *ngIf="programName" [runId]="runId"></app-case-header>
			</div>				
		</div>
		<div class="card card-info" style="box-shadow: none !important;margin-top:-4px;">
			<app-case-head *ngIf="defaultCaseType" (sendCaseData)="fnDataHead($event)" [runId]="runId"></app-case-head>
		</div>	
		<div class="card " style="box-shadow: none !important;padding:3px;background-color: #f0f0f0;margin-top:-10px;">
			<table width="100%">
				<tr>
					<td align="right">
						<span style="float:right;color: red;width: fit-content;">* ก่อนแก้ไขใบเสร็จให้ click <i class="fa fa-pencil" style="font-size:18px;color: #000000;" ></i> เพื่อเรียกข้อมูลใหม่ก่อน</span>
					</td>
				</tr>
			</table>
			</div>
		<div class="card " style="box-shadow: none !important;padding:5px;background-color: #f0f0f0;margin-top:-10px;">		
			<table width="100%"  border="0" cellspacing="2" cellpadding="0" class="form_table">      
				<tr>
					<td align="right" align="center" style="text-align: center;padding-bottom: 3px;">
						<div style="width: auto;margin: 0 auto;text-align: center;display:table;">
							<div style="float: left;margin-left: 0px;">
								<input type="checkbox" [(ngModel)]="result.by_hand" style="width:15px;height:15px;margin-top:5px;"/>
							</div>
							<div style="float: left;margin-left:5px;margin-top:4px;">เขียนมือ</div>
							<div style="float: left;margin-left:10px;margin-top:4px;">วันที่ :&nbsp;</div>
							<div style="float:left;"><input  type="text" [(ngModel)]="result.rcv_date" readonly style="width:110px;" class="form-control jcalendar rcv_date" #rcv_date (click)="directiveDate(rcv_date.value,'rcv_date')"></div>
                			<div style="float:left;margin-left:8px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;" onClick="$('.rcv_date').focus();"></i></div>
							<div style="float: left;margin-left:10px;margin-top:4px;">ประเภทเงิน :&nbsp;</div>
							<div style="float:left;">
								<ng-select  [(ngModel)]="result.rcv_flag" [clearable]="false" style="width:130px;" (change)="receiptType(2);">
									<ng-option *ngFor="let getData of getReceive"  [value]=getData.fieldIdValue >{{getData.fieldNameValue}}</ng-option>
								</ng-select>
							</div>
							<div style="float:left;margin-left:2px;">
								<ng-select  [(ngModel)]="result.s_type" [clearable]="false" style="width:230px;" (change)="dFineType($event);runReceive();getAmt(0)">
									<ng-option *ngFor="let getData of getReceiveType"  [value]=getData.fieldIdValue >{{getData.fieldNameValue}}</ng-option>
								</ng-select>
							</div>
							<div style="float:left;margin-left:2px;" *ngIf="fine_type">
								<ng-select [(ngModel)]="result.pay_type" [clearable]="false" style="width:100px;" >
									<ng-option [value]="1">ชำระครบ</ng-option>
									<ng-option [value]="2">ผ่อนชำระ</ng-option>
								</ng-select>
							</div>
							<div style="float: left;margin-left:8px;margin-top:4px;">ชั้น :&nbsp;</div>
							<div style="float:left;">
								<ng-select [(ngModel)]="result.appeal_type" [clearable]="false" style="width:100px;" >
									<ng-option [value]="1">ศาลชั้นต้น</ng-option>
									<ng-option [value]="2">อุทธรณ์</ng-option>
									<ng-option [value]="3">ฎีกา</ng-option>
								</ng-select>
							</div>
							<div style="float: left;margin-left:10px;margin-top:4px;">ปีงบประมาณ :&nbsp;</div>
							<div style="float: left;margin-left: 0px;">
								<div style="float:left;margin-left:3px;"><input  [(ngModel)]="result.budget_year" type="text" readonly   class="form-control" style="width:80px;"></div>
							</div>
							<div style="float: left;margin-left:10px;margin-top:4px;">เล่มที่ :&nbsp;</div>
							<div style="float: left;margin-left: 0px;">
								<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.book_no"  class="form-control" style="width:80px;"></div>
							</div>
							<div style="float: left;margin-left:10px;margin-top:4px;">เลขที่ :&nbsp;</div>
							<div style="float: left;margin-left: 0px;">
								<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.rreceipt_no"  class="form-control" style="width:80px;"></div>
							</div>
							<div style="float: left;margin-left: 4px;">
								<button type="button" class="btn btn-primary" style="margin-left:0px;" (click)="searchData(2)">ค้นหา</button>
							</div>
						</div>
					</td>
					
				</tr>
				<tr >
					<td>
						<div style="width:99%;margin:0 auto;">
							<div style="float:left;width: 10%;border:1px solid #cccccc;height:32px;text-align: right;padding-top:6px;" >ผู้ชำระเงิน :&nbsp;</div>
							<div style="float:left;width: 90%;border:1px solid #cccccc;height:32px;padding-top:3px;margin-left:-1px;">
								<div style="float:left;" >
									<div style="float: left;margin-left:10px;margin-top:4px;">ประเภทคู่ความ :&nbsp;</div>
									<div style="float:left;">
										<ng-select  [(ngModel)]="result.litigant_type" [clearable]="false" style="width:130px;" (change)="result.item=null;result.def_name=null;">
											<ng-option *ngFor="let getData of getLitType"  [value]=getData.fieldIdValue >{{getData.fieldNameValue}}</ng-option>
										</ng-select>
									</div>
									<div style="float: left;margin-left:10px;margin-top:4px;">ที่ :&nbsp;</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text" [(ngModel)]="result.item" (change)="tabChangeInput('item',$event)"  class="form-control" style="width:60px;"></div>
									</div>
									<div style="float: left;margin-left:10px;margin-top:4px;">ชื่อ/ชื่อสกุล :&nbsp;</div>
								</div>
								<div style="float: left;margin-left: 0px;">
									<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.def_name"  class="form-control" style="width:472px;"></div>
								</div>
								<div style="float: left;margin-left:2px;margin-top:4px;" >
									<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;cursor: pointer;" (click)="clickOpenMyModalComponent(1)"></i>
								</div>
								<div style="float: left;margin-left:2px;margin-top:4px;" *ngIf="this.fine_type==1 && result.litigant_type==18">
									<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;cursor: pointer;" (click)="clickOpenMyModalComponent(3)"></i>
								</div>
								<div style="float: left;margin-left:2px;margin-top:4px;" >
									<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;cursor: pointer;" (click)="clickOpenMyModalComponent(2)"></i>
								</div>
							</div>
						</div>
					</td>
				</tr>
				<tr *ngIf="dataHead.run_id && result.rcv_flag==1">
					<td style="padding-top: 3px;">
						<table width="99%" >
							<tr>
								<td align="right" width="20%">ทุนทรัพย์ศาลชั้นต้น :&nbsp;</td>
								<td width="30%">
									<div style="float:left;"><input  type="text" [value]="curencyFormat(dataHead.deposit,2)" class="form-control" style="width:180px;" readonly></div>
									<div style="float:left;margin-left:5px;margin-top:3px;">บาท</div>
								</td>
								<td align="right" width="15%">ค่าขึ้นศาลชั้นต้น :&nbsp;</td>
								<td width="35%">
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input type="text" [value]="curencyFormat(dataHead.court_fee,2)" class="form-control" style="width:180px;" readonly></div>
									</div>
									<div style="float: left;margin-left:5px;margin-top:3px;">บาท</div>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr [ngStyle]="this.fine_type==2 ?  {'display': ''} : {'display': 'none'}">
					<td style="padding-top:5px;">
						<table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTriggerFof" class="table table-striped table-bordered table-sm row-border hover" style="width:99%;">
							<thead>
								<tr>
									<th width="3%" class="no-sort">ลบ</th>
									<th width="31%" class="no-sort"> ชื่อ/ชื่อสกุล จำเลย</th>
									<th width="8%" class="no-sort">ศาลสั่งปรับ</th>
									<th width="8%" class="no-sort"><span style="color: #1757b8;font-weight: bold;">*</span>หักวันขัง</th>
									<th width="8%" class="no-sort">วันละ</th>
									<th width="9%" class="no-sort">รวมเงินหัก</th>
									<th width="10%" class="no-sort">จำนวนเงินรวม</th>
									<th width="8%" class="no-sort">
										<select [(ngModel)]="payment_ratio"  style="height:24px !important;border-radius: 4px !important;border: 1px solid #ced4da;" (change)="sumForfeitDef()">
											<option value="100" >ชำระ 100%</option>
											<option value="95" >ชำระ 95%</option>
											<option value="90" >ชำระ 90%</option>
											<option value="85" >ชำระ 85%</option>
											<option value="80" >ชำระ 80%</option>
											<option value="75" >ชำระ 75%</option>
											<option value="70" >ชำระ 70%</option>
											<option value="65" >ชำระ 65%</option>
											<option value="60" >ชำระ 60%</option>
											<option value="55" >ชำระ 55%</option>
											<option value="50" >ชำระ 50%</option>
										</select>            
									</th>
									<th width="15%" class="no-sort">หมายเหตุ</th>
								</tr>
							</thead>
							<tbody *ngIf="forfeitDefObj?.length != 0">
								<tr *ngFor="let post of forfeitDefObj;let i = index;">
									<td align="center"><i class='fas fa-times' style='font-size:18px;color:rgba(255, 0, 0, 0.7);cursor: pointer;' *ngIf="((forfeitDefObj[i].edit_item && !editReceipt) || loginEdit) && i!=(forfeitDefObj.length-1)" (click)="delForfeitDef(i)"></i></td>
									<td align="center">
										<div style="display: table;margin: 0 auto;">
											<div style="float:left;"><input type="text" [(ngModel)]="forfeitDefObj[i].def_item" (change)="tabChangeInputFof(i,$event)" class="form-control" style="width:55px;"></div>
											<div style="float:left;margin-left:2px;"><input type="text" [(ngModel)]="forfeitDefObj[i].def_name" class="form-control" style="width:270px;" readonly></div>
											<div style="float:left;margin:0 auto;margin-left:2px;margin-top:2px;" ><i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;cursor: pointer;" (click)="clickOpenMyModalComponentIndex(5,i)"></i></div>
										</div>
									</td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].forfeit_amt" class="form-control" style="width:90px;text-align: center;" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calForfeitDef(i)"></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].jail_day" class="form-control" style="width:60px;text-align: center;" (change)="calForfeitDef(i)"></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].jail_day_amt" class="form-control" style="width:60px;text-align: center;" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calForfeitDef(i)"></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].total_amt" class="form-control" style="width:90px;text-align: center;" readonly></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].total_pay" class="form-control" style="width:90px;text-align: center;" readonly></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].pay_amt" class="form-control" style="width:90px;text-align: center;" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calForfeitDef(i)"></td>
									<td align="center"><input type="text" [(ngModel)]="forfeitDefObj[i].remark" class="form-control" style="width:97%;text-align: center;" (change)="calForfeitDef(i)"></td>
								</tr>
								<tr>
									<td colspan="6" align="center">เป็นเงิน</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center"><input type="text" [(ngModel)]="sum_fee1" class="form-control" style="width:90px;text-align: center;" readonly></td>
									<td align="center"><input type="text" [(ngModel)]="sum_pay1" class="form-control" style="width:90px;text-align: center;" readonly></td>
									<td align="center">บาท</td>
								</tr>
							</tbody>
							
						</table>
					</td>
				</tr>
				<tr>
					<td style="padding-top:5px;">
						<table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTriggerRev" class="table table-striped table-bordered table-sm row-border hover" style="width:99%;">
							<thead>
								<tr>
									<th width="2%" class="no-sort">ลบ</th>
									<th width="7%" class="no-sort">ประเภท</th>
									<th width="40%" class="no-sort">รายละเอียดเงิน</th>
									<th width="13%" class="no-sort">เงินสด</th>
									<th width="13%" class="no-sort">เช็ค</th>
									<th width="12%" class="no-sort">EDC</th>
									<th width="13%" class="no-sort">จำนวนเงินรวม</th>
								</tr>
							</thead>
							
							<tbody *ngIf="receiptDetailObj?.length != 0">
								<tr *ngFor="let post of receiptDetailObj;let i = index;" >
									<td align="center"><i class='fas fa-times' style='font-size:18px;color:rgba(255, 0, 0, 0.7);cursor: pointer;' *ngIf="((receiptDetailObj[i].edit_item && !editReceipt) || loginEdit) && i!=(receiptDetailObj.length-1)" (click)="delReceiptDetail(i)"></i></td>
									<td >
										<div style="margin:0 auto;">
											<ng-select  [(ngModel)]="receiptDetailObj[i].receipt_type_id" [clearable]="false" style="width:130px;" (change)="receiptTypeIndex(i)">
												<ng-option *ngFor="let getData of getReceive"  [value]=getData.fieldIdValue >{{getData.fieldNameValue}}</ng-option>
											</ng-select>
										</div>
									</td>
									<td align="center">
										<div style="width: auto;margin: 0 auto;text-align: center;display:table;">
											<div style="margin:0 auto;float: left;">
												<input type="hidden" [(ngModel)]="receiptDetailObj[i].sub_type_id">
												<div style="margin-left:3px;"><input type="text" [(ngModel)]="receiptDetailObj[i].sub_type_name" class="form-control" style="width:346px;"></div>
											</div>
											<div style="float:left;margin:0 auto;margin-left:2px;" >
												<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;cursor: pointer;" (click)="clickOpenMyModalComponentIndex(4,i)"></i>
											</div>
										</div>
									</td>
									<td align="center">
										<div style="margin-left:3px;"><input   type="text"  [(ngModel)]="receiptDetailObj[i].cash_amt" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calAmt(i)"   class="form-control" style="width:120px;"></div>
									</td>
									<td align="center">
										<div style="margin-left:3px;"><input   type="text"   [(ngModel)]="receiptDetailObj[i].cheque_amt" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calAmt(i)"  class="form-control" style="width:120px;"></div>
									</td>
									<td align="center">
										<div style="margin-left:3px;"><input   type="text"   [(ngModel)]="receiptDetailObj[i].credit_amt" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="calAmt(i)"  class="form-control" style="width:120px;"></div>
									</td>
									<td align="center">
										<div style="margin-left:3px;"><input   type="text" readonly  [(ngModel)]="receiptDetailObj[i].rcv_amt"   class="form-control" style="width:120px;"></div>
									</td>
								</tr>
								
								<tr>
									<td colspan="3" align="center">เป็นเงิน</td>
									<td align="center">&nbsp;</td>
									<td align="center">&nbsp;</td>
									<td align="center">&nbsp;</td>
									<td align="center">
										<div style="margin-left:3px;"><input   type="text" readonly  [(ngModel)]="sum_fee"  class="form-control" style="width:120px;"></div>
									</td>
									<td align="center" style="display:none;">&nbsp;</td>
									<td align="center" style="display:none;">&nbsp;</td>
								</tr>
							</tbody>
						</table>
					</td>
				</tr>
				<tr>
					<td >
						<div style="width: 80%;border-top: 1px solid #cccccc;height: 2px;margin: 0 auto;">&nbsp;</div>
					</td>
				</tr>
				<tr>
					<td >
						<table width="99%">
							<tr>
								<td width="10%" align="right">จำนวนเงินรับ :&nbsp;</td>
								<td width="15%">
									<div style="margin-left:3px;"><input   type="text"  [(ngModel)]="result.received_cash" (focusout)="addComma($event)" (focusin)="revComma($event)" (change)="retCash()" class="form-control" style="width:120px;"></div>
								</td>
								<td width="10%" align="right">จำนวนเงินทอน :&nbsp;</td>
								<td width="20%">
									<div style="margin-left:3px;"><input   type="text" readonly  [(ngModel)]="result.return_cash"  class="form-control" style="width:120px;"></div>
								</td>
								<td width="45%" >
									<div style="float: left;margin-left: 0px;">
										<input type="checkbox" [(ngModel)]="result.transfer_flag" [value]="1" style="width:15px;height:15px;margin-top:5px;"/>
									</div>
									<div style="float: left;margin-left:5px;margin-top:4px;">เงินโอนเข้าบัญชี หมายเลขบัญชี :&nbsp;</div>
									<div style="float:left;margin-left:3px;"><input   type="text" [(ngModel)]="result.account_no"  class="form-control" style="width:220px;"></div>
									<div style="float: left;margin-left:5px;margin-top:4px;color: red;">(ป้อนจำนวนเงินในช่องเงินสด)</div>
								</td>
							</tr>
							<tr>
								<td align="right">หมายเหตุ :&nbsp;</td>
								<td colspan="3">
									<div style="margin-left:3px;"><input   type="text"  [(ngModel)]="result.remark" class="form-control" style="width:486px;"></div>
								</td>
								<td  >
									<div style="float: left;margin-left:5px;margin-top:4px;">ธนาคาร :&nbsp;</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text" [(ngModel)]="result.bank_id" (change)="tabChangeInput('bank_id',$event)"  class="form-control" style="width:60px;"></div>
									</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.bank_name"  class="form-control" style="width:202px;" readonly></div>
									</div>
									<div style="float: left;margin-left:2px;" >
										<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(6)"></i>
									</div>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td >
						<div style="width: 80%;border-top: 1px solid #cccccc;height: 2px;margin: 0 auto;">&nbsp;</div>
					</td>
				</tr>
				<tr>
					<td >
						<div style="text-align: center;width: 99%;margin: 0 auto;">
							<button type="button" class="btn btn-success"  (click)="saveData(1)" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)">จัดเก็บ</button>
							<button type="reset" class="btn btn-success" style="margin-left:5px;" (click)="saveData(2)" *ngIf="(editReceipt==0 && loginEdit==0) || (editReceipt!=0 && loginEdit!=0)">จัดเก็บและพิมพ์</button>
							<button type="button" class="btn btn-warning" style="margin-left:5px;"  (click)="searchData(3)">ยกเลิก</button>
							<button type="reset" class="btn btn-primary" style="margin-left:5px;" *ngIf="editReceipt && !loginEdit" (click)="clickOpenMyModalComponent(12)">Login แก้ไขใบเสร็จ</button>
							<button type="button" class="btn btn-info" style="margin-left:5px;"  (click)="printReport(1)">พิมพ์ใบเสร็จ</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="setDefPage()">เพิ่ม</button>
							<button type="button" class="btn btn-warning" style="margin-left:5px;"  (click)="refreshPage()">ล้างหน้าจอ</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="ffn1600Page()">ค่าฤชาฯ</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="printReport(2)">รายงานจนท.1</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="printReport(3)">รายงานจนท.2</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="prfn1200Page(1)">รายงานจนท.ใบเสร็จ 1</button>
							<button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="prfn1200Page(2)">รายงานจนท.ใบเสร็จ 2</button>
						</div>
					</td>
				</tr>
				<tr>
					<td style="padding-top:10px;">
						<div style="width:99%;margin:0 auto;">
							<div style="float:left;width: 50%;border:1px solid #cccccc;height:58px;text-align: center;padding-top:6px;display: table;">
								<div style="margin-top:16px;">
									<div style="float: left;margin-left:50px;margin-top:4px;">เงินสดรวม :&nbsp;</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text" readonly [(ngModel)]="sum_cash"   class="form-control" style="width:120px;"></div>
									</div>
									<div style="float: left;margin-left:3px;margin-top:4px;">บาท</div>
									<div style="float: left;margin-left:20px;margin-top:4px;">เช็ครวม :&nbsp;</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text" readonly [(ngModel)]="sum_check"  class="form-control" style="width:120px;"></div>
									</div>
									<div style="float: left;margin-left:3px;margin-top:4px;">บาท</div>

									<div style="float: left;margin-left:20px;margin-top:4px;">EDC :&nbsp;</div>
									<div style="float: left;margin-left: 0px;">
										<div style="float:left;margin-left:3px;"><input   type="text" readonly [(ngModel)]="sum_credit"  class="form-control" style="width:120px;"></div>
									</div>
									<div style="float: left;margin-left:3px;margin-top:4px;">บาท</div>
								</div>
							</div>
							<!--  -->
							<div *ngIf="result.run_id==0 && result.receipt_running" style="float:left;width: 10%;border:1px solid #cccccc;height:58px;padding-top:3px;margin-left:-1px;display: table;">
								<table width="100%"  border="0" cellpadding="0" cellspacing="0" style="margin-top:2px;">
									<tr>
									  <td  align="right" width="35%">
										<div style="float:left;margin-left:3px;">
											<input type="checkbox"  [(ngModel)]="result.cancel_flag" value="1" (click)="delReceiptRecord('cancel')" style="width:15px;height:15px;margin-top:8px;" >
										</div>
										<div  style="float: left;margin-left:5px;margin-top:5px;" >ยกเลิกใบเสร็จ</div>
									  </td>
									</tr>
									<tr>
										<td  width="65%">
										  <div style="float: left;margin-left:2px;" >
												<i class="fa fa-close" style="font-size:20px;color:#d50000d1;cursor: pointer;" (click)="delReceipt('del');">
													<span style="color: #212529;font-size: 14px !important;margin-left: 5px;">ลบใบเสร็จ</span>
												</i>
										  </div>
										</td>
									</tr>
								</table>
							</div>
							<!--  -->
							<div style="float:left;width: 40%;border:1px solid #cccccc;height:58px;padding-top:3px;margin-left:-1px;display: table;">
								<table width="100%"  border="0" cellpadding="0" cellspacing="0" style="margin-top:2px;">
									<tr>
									  <td  align="right" width="35%">ผู้รับเงิน :&nbsp;</td>
									  <td  width="65%">
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.userrcv_id" (change)="tabChangeInput('userrcv_id',$event)"  class="form-control" style="width:60px;"></div>
										</div>
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.userrcv_name"  class="form-control" style="width:202px;" readonly></div>
										</div>
										<div style="float: left;margin-left:2px;" >
											<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(7)"></i>
										</div>
									  </td>
									</tr>
									<tr>
									  <td  align="right">ผ.อ./เจ้าหน้าที่แทน :&nbsp;</td>
									  <td  > 
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.usermng_id"  (change)="tabChangeInput('usermng_id',$event)" class="form-control" style="width:60px;"></div>
										</div>
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="result.usermng_name"  class="form-control" style="width:202px;" readonly></div>
										</div>
										<div style="float: left;margin-left:2px;" >
											<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(8)"></i>
										</div>
										<div style="float: left;margin-left:2px;" >
											<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(9)"></i>
										</div>
									  </td>
									</tr>
								</table>
							</div>
						</div>
					</td>
				</tr>
				<tr [ngStyle]="result.receipt_running?  {'display': ''} : {'display': 'none'}">
					<td style="padding-top:10px;" align="center">
						<fieldset style="width:99%;border-radius:4px;border:1px solid #505050;padding:1px;margin-top:6px;padding-bottom:5px;">
							<legend (click)="visibleCheckList()" style="line-height: 10px;float:none;margin-left:18px;font-weight:bold;color:rgb(10, 83, 240);cursor:pointer;padding:0 6px 0 6px;font-size:15px;border-bottom:none;width:auto;margin-bottom: 6px;" class="fCheck">รายการเช็ค</legend>
							<table width="100%"  border="0" cellpadding="0" cellspacing="0" style="margin-top:2px;" [ngStyle]="visibleCheck ?  {'display': 'none'} : {'display': ''}">
								<tr>
								  	<td  align="right" width="15%">เลขที่เช็ค :&nbsp;</td>
								  	<td  width="40%">
										<div style="float:left;"><input   type="text"  [(ngModel)]="check.check_no"   class="form-control" style="width:120px;"></div>
										<div style="float:left;margin-left:5px;margin-top:3px;">เลขที่บัญชีธนาคาร :</div>
										<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="check.book_account"   class="form-control" style="width:170px;"></div>
									</td>
								  	<td  width="13%"></td>
									<td  width="32%">
										<div style="float:left;margin-top:2px;"><input type="checkbox" [(ngModel)]="check.cancel_check"  [value]="1" #cCheck (click)="cancelCheck(cCheck.checked)" style="width:15px;height:16px;"></div>
										<div style="float:left;margin-left:5px;color: red;">ยกเลิกเช็ค</div>
									</td>
								</tr>
								<tr>
									<td  align="right">ธนาคาร :&nbsp;</td>
									<td >
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:0px;"><input   type="text" [(ngModel)]="check.bank_id" (change)="tabChangeInput('bank_id2',$event)"  class="form-control" style="width:60px;"></div>
										</div>
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="check.bank_name"  class="form-control" style="width:202px;" readonly></div>
										</div>
										<div style="float: left;margin-left:2px;" >
											<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(10)"></i>
										</div>
									</td>
									<td align="right">สาขา :&nbsp;</td>
									<td >
										<div style="float:left;"><input   type="text"  [(ngModel)]="check.bankbranch"  class="form-control" style="width:202px;" ></div>
									</td>
							  </tr>
							  <tr>
								<td  align="right">วันที่เช็ค :&nbsp;</td>
								<td >
									<div style="float: left;margin-left:0px;">
										<input  type="text" [(ngModel)]="check.check_date" class="form-control jcalendar check_date" #check_date (click)="directiveCheckDate(check_date.value,'check_date')" style="width:120px;" />
									</div>
									<div style="float:left;margin-left:4px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;" onClick="$('.check_date').focus();"></i></div>
									<div style="float:left;margin-left:5px;margin-top:3px;">จำนวนเงินในเช็ค :</div>
									<div style="float:left;"><input   type="text"  [(ngModel)]="check.check_amt"  class="form-control" style="width:102px;" ></div>
								</td>
								<td >&nbsp;</td>
								<td >
									<div style="text-align: left;width: 99%;margin: 0 auto;" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)">
										<button type="button" class="btn btn-success" (click)="saveCheckData()" >จัดเก็บ</button>
										<button type="button" class="btn btn-warning" style="margin-left:2px;" (click)="check=[]">ยกเลิก</button>
									</div>
								</td>
						  	</tr>
							</table>

							<table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTriggerCheck" class="table table-striped table-bordered table-sm row-border hover" style="width:99%;margin-top:5px;">
								<thead>
									<tr>
										<th  align="center" class="no-sort">ลบ</th>
										<th  align="center" class="no-sort">เลือก</th>
										<th width="19%" align="center"class="no-sort">เลขที่เช็ค</th>
										<th width="25%" align="center" class="no-sort">ธนาคาร</th>
										<th width="21%" align="center" class="no-sort">สาขา</th>
										<th width="14%" align="center" class="no-sort">วันที่สั่งจ่าย</th>
										<th width="14%" align="center" class="no-sort">จำนวนเงิน</th>
									</tr>
								</thead>
								<tbody *ngIf="checkListObj?.length != 0">
									<tr *ngFor="let post of checkListObj;let i = index;" [ngClass]="{'red': post.cancel_flag}">
										<td align="center"><i class='fas fa-times' style='font-size:18px;color:rgba(255, 0, 0, 0.7);cursor: pointer;' (click)="delCheck(i)" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)"></i></td>
										<td align="center"><i class="fa fa-pencil" style="font-size:18px;cursor: pointer;" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)" (click)="editCheck(i)"></i></td>
										<td align="center" >{{post.check_no}}</td>
										<td align="center" >{{post.bank_name}}</td>
										<td align="center" >{{post.bankbranch}}</td>
										<td align="center" >{{post.check_date}}</td>
										<td align="center" >{{post.check_amt}}</td>	
									</tr>
								</tbody>
								<tbody *ngIf="checkListObj?.length == 0">
									<tr>
										<td colspan="7" style="color:red;text-align: center;" class="no-data-available">###### ไม่พบข้อมูล #######</td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
		
										<td style="display:none;"></td>
										<td style="display:none;"></td>
									</tr>
								</tbody>
							</table>

						</fieldset>			
					</td>
				</tr>
				<tr [ngStyle]="result.receipt_running?  {'display': ''} : {'display': 'none'}">
					<td style="padding-top:10px;" align="center">
						<fieldset style="width:99%;border-radius:4px;border:1px solid #505050;padding:1px;margin-top:6px;padding-bottom:5px;">
							<legend (click)="visibleCreditCard()" style="line-height: 10px;float:none;margin-left:18px;font-weight:bold;color:rgba(10, 83, 240);cursor:pointer;padding:0 6px 0 6px;font-size:15px;border-bottom:none;width:auto;margin-bottom: 6px;" class="fEdc">รายการ EDC</legend>
							<table width="100%"  border="0" cellpadding="0" cellspacing="0" style="margin-top:2px;" [ngStyle]="visibleCredit ?  {'display': 'none'} : {'display': ''}">
								<tr>
								  	<td  align="right" width="15%">ประเภทบัตร :&nbsp;</td>
								  	<td  width="47%">
										<div style="float:left;">
											<ng-select  [(ngModel)]="credit.card_type" [clearable]="false" style="width:180px;">
												<ng-option *ngFor="let getData of getCard"  [value]=getData.fieldIdValue >{{getData.fieldNameValue}}</ng-option>
											</ng-select>
										</div>
										<div style="float:left;margin-left:5px;margin-top:3px;">เลขที่บัตร :</div>
										<div style="float:left;margin-left:2px;"><input   type="text"  [(ngModel)]="credit.card_no"  class="form-control" style="width:160px;" ></div>
										<div style="float:left;margin-left:5px;margin-top:3px;">บัตรหมดอายุ :</div>
										<div style="float:left;margin-left:2px;">
											<ng-select  [(ngModel)]="credit.valid_month" [clearable]="false" style="width:55px;">
												<ng-option  [value]="01" >01</ng-option>
												<ng-option  [value]="02" >02</ng-option>
												<ng-option  [value]="03" >03</ng-option>
												<ng-option  [value]="04" >04</ng-option>
												<ng-option  [value]="05" >05</ng-option>
												<ng-option  [value]="06" >06</ng-option>
												<ng-option  [value]="07" >07</ng-option>
												<ng-option  [value]="08" >08</ng-option>
												<ng-option  [value]="09" >09</ng-option>
												<ng-option  [value]="10" >10</ng-option>
												<ng-option  [value]="11" >11</ng-option>
												<ng-option  [value]="12" >12</ng-option>
											</ng-select>
										</div>
										<div style="float:left;margin-left:5px;margin-top:3px;">/</div>
										<div style="float:left;margin-left:2px;">
											<ng-select  [(ngModel)]="credit.valid_year" [clearable]="false" style="width:90px;">
												<ng-option *ngFor="let getData of getYears"  [value]=getData.year >{{getData.year}}</ng-option>
											</ng-select>
										</div>
									</td>
								  	<td  width="10%" align="right">ธนาคาร :&nbsp;</td>
									<td  width="28%">
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:0px;"><input   type="text" [(ngModel)]="credit.bank_id" (change)="tabChangeInput('bank_id3',$event)"  class="form-control" style="width:60px;"></div>
										</div>
										<div style="float: left;margin-left: 0px;">
											<div style="float:left;margin-left:3px;"><input   type="text"  [(ngModel)]="credit.bank_name"  class="form-control" style="width:202px;" readonly></div>
										</div>
										<div style="float: left;margin-left:2px;" >
											<i  class="far fa-list-alt" style="font-size: 20px;margin-left:2px;margin-top:1px;" (click)="clickOpenMyModalComponent(11)"></i>
										</div>
									</td>
								</tr>
								<tr>
									<td  align="right">ชื่อเจ้าของบัตร :&nbsp;</td>
									<td >
										<div style="float:left;"><input   type="text"  [(ngModel)]="credit.card_owner"  class="form-control" style="width:311px;" ></div>
									</td>
									<td align="right">จำนวนเงิน :&nbsp;</td>
									<td >
										<div style="float:left;"><input   type="text"  [(ngModel)]="credit.card_amt"  class="form-control" style="width:101px;" ></div>
										<div style="float:left;margin-left:3px;margin-top:3px;">บาท</div>
										<div style="float:left;margin-top:4px;margin-left:8px;"><input type="checkbox" [(ngModel)]="credit.cancel_edc"  [value]="1" style="width:15px;height:16px;"></div>
										<div style="float:left;margin-left:5px;color: red;margin-top:3px;">ยกเลิกบัตรเครดิต</div>
									</td>
								  </tr>
								  <tr>
									<td  align="right">&nbsp;</td>
									<td >&nbsp;</td>
									<td >&nbsp;</td>
									<td >
										<div style="text-align: left;width: 99%;margin: 0 auto;" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)">
											<button type="button" class="btn btn-success" (click)="saveCreditData()">จัดเก็บ</button>
											<button type="button" class="btn btn-warning" style="margin-left:2px;" (click)="credit=[];setDefCredit();">ยกเลิก</button>
										</div>
									</td>
								  </tr>
								
							</table>

							<table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTriggerCredit" class="table table-striped table-bordered table-sm row-border hover" style="width:99%;margin-top:5px;">
								<thead>
									<tr>
										<th  align="center" class="no-sort">ลบ</th>
										<th  align="center" class="no-sort">เลือก</th>
										<th width="22%" align="center"class="no-sort">ประเภท</th>
										<th width="16%" align="center" class="no-sort">เลขที่บัตร</th>
										<th width="14%" align="center" class="no-sort">ธนาคาร</th>
										<th width="14%" align="center" class="no-sort">ชื่อเจ้าของบัตร</th>
										<th width="12%" align="center" class="no-sort">บัตรหมดอายุ</th>
										<th width="15%" align="center" class="no-sort">จำนวนเงิน</th>
									</tr>
								</thead>
								<tbody *ngIf="creditObj?.length != 0">
									<tr *ngFor="let post of creditObj;let i = index;" [ngClass]="{'red': post.cancel_flag}">
										<td align="center"><i class='fas fa-times' style='font-size:18px;color:rgba(255, 0, 0, 0.7);cursor: pointer;' (click)="delCredit(i)" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)"></i></td>
										<td align="center"><i class="fa fa-pencil" style="font-size:18px;cursor: pointer;" *ngIf="(!editReceipt && !loginEdit) || (editReceipt && loginEdit)" (click)="editCredit(i)"></i></td>
										<td align="center" >{{post.card_type_desc}}</td>
										<td align="center" >{{post.card_no}}</td>
										<td align="center" >{{post.bank_name}}</td>
										<td align="center" >{{post.card_owner}}</td>
										<td align="center" >{{post.valid_month}}/{{post.valid_year}}</td>	
										<td align="center" >{{post.card_amt}}</td>	
									</tr>
								</tbody>
								<tbody *ngIf="creditObj?.length == 0">
									<tr>
										<td colspan="8" style="color:red;text-align: center;" class="no-data-available">###### ไม่พบข้อมูล #######</td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
		
										<td style="display:none;"></td>
										<td style="display:none;"></td>
										<td style="display:none;"></td>
									</tr>
								</tbody>
							</table>

						</fieldset>			
					</td>
				</tr>
				
			</table>

			
		</div>	

		<div class="card " style="box-shadow: none !important;padding:5px;background-color: #f0f0f0;width: 2700px;">	
			<fieldset style="width:99%;border-radius:4px;border:1px solid #333333;padding:1px;padding:5px;">
				<legend style="line-height: 10px;float:none;margin-left:18px;font-weight:bold;color:#000000;padding:0 6px 0 6px;font-size:16px;border-bottom:none;width:auto;cursor:pointer;margin-bottom: 6px;" class="lClick">รายการใบเสร็จ </legend>
				
				<table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTriggerData" class="table table-striped table-bordered table-sm row-border hover" style="width:100%;">
						<thead>
							<tr>
								<th width="1%" align="center" class="no-sort">ลบ</th>
								<th width="2%" align="center" class="no-sort">แก้ไข</th>
								<th width="2%" align="center" class="no-sort">ยกเลิก</th>
								<th width="2%" align="center" >เล่มที่</th>
								<th width="2%" align="center" >เลขที่</th>
								<th width="3%" align="center" >พิมพ์ใบเสร็จ</th>
								<th width="4%" align="center" >วันที่ทำรายการ</th>
								<th width="3%" align="center" >ประเภทเงิน</th>
								<th width="5%" align="center" >รายละเอียด</th>
								<th width="3%" align="center" >เงินสดรวม</th>
								<th width="2%" align="center" >เช็ครวม</th>
								<th width="4%" align="center" >บัตรเครดิตรวม</th>
								<th width="5%" align="center" >รวมทั้งสิ้น</th>
								<th width="3%" align="center" >กันเงิน<span style="color: red;">*</span></th>
								<th width="5%" align="center" >เหลือจากกันเงิน<span style="color: red;">*</span></th>
								<th width="4%" align="center" >จ่ายจริง</th>
								<th width="4%" align="center" >เหลือจริง</th>
								<th width="7%" >ผู้ชำระเงิน</th>
								<th width="7%" >หน่วยงานที่บันทึก</th>
								<th width="8%" >ผู้บันทึก</th>
								<th width="6%" >วัน/เวลาที่บันทึก</th>
								<th width="7%" >หน่วยงานที่แก้ไข</th>
								<th width="6%" >ผู้แก้ไข</th>
								<th width="5%" >วัน/เวลาที่แก้ไข</th>

							</tr>
						</thead>
						<tbody *ngIf="receiptDetailData?.length != 0">
							<tr *ngFor="let post of receiptDetailData;let i = index;" [ngClass]="{'red': post.cancel_flag}">
								<td align="center"><i class='fas fa-times' style='font-size:18px;color:rgba(255, 0, 0, 0.7);cursor: pointer;' (click)="delReceipt(i)"></i></td>
								<td align="center"><i class="fa fa-pencil" style="font-size:18px;cursor: pointer;" (click)="editData(i,2)"></i></td>
								<td align="center" ><input type="checkbox" [(ngModel)]="receiptDetailData[i].cFlag" [value]="1" (click)="delReceiptRecord(i)"></td>
								<td align="center" >{{post.book_no}}</td>
								<td align="center" >{{post.rreceipt_no}}</td>
								<td align="center" ><button type="button" class="btn btn-info" style="margin-left:0px;" (click)="printReportIndex(i)">พิมพ์</button></td>
								<td align="center" >{{post.rcv_date}}</td>
								<td align="center" >{{post.receipt_type_desc}}</td>
								<td align="center" >{{post.sub_type}}</td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_cash,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_check,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_credit,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_fee,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.send_amt,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_fee-post.send_amt,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.pay_amt,2)"></span></td>
								<td align="center" ><span [innerHtml]="curencyFormat(post.sum_fee-post.pay_amt,2)"></span></td>
								<td  align="center">{{post.def_name}}</td>
								<td  align="center">{{post.create_dep_name}}</td>
								<td  align="center">{{post.create_user}}</td>
								<td align="center" >{{post.create_date}}</td>
								<td  align="center">{{post.update_dep_name}}</td>
								<td  align="center">{{post.update_user}}</td>
								<td  align="center">{{post.update_date}}</td>
								
							</tr>
						</tbody>
						<tbody *ngIf="receiptDetailData?.length == 0">
							<tr>
								<td colspan="24" style="color:red;text-align: center;" class="no-data-available">###### ไม่พบข้อมูล #######</td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>

								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>

								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>

								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>

								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
								<td style="display:none;"></td>
							</tr>
						</tbody>
					</table>
					
			</fieldset>
		</div>
	
	</div>


	<div class="modal fade" data-refresh="true"  role="dialog" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="width:100%;height:100%;">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h5 class="modal-title text-danger" id="exampleModalLabel"></h5>
			  <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closeModal()"></button>
			  <button type="button" class="btn btn-warning" style="display:none;" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="loadMyModalComponent();" #openbutton></button>
			</div>
			<div class="modal-body" >
					<input type="hidden" name="table_name" id="table_name">
					<input type="hidden" name="field_id" id="field_id">
					<input type="hidden" name="field_name" id="field_name">
					<div style="min-height: 100px;max-height: 480px;overflow: auto;">
					<app-modal-case-litigant *ngIf="loadModalLitComponent" [type]=listTable [run_id]=dataHead.run_id [lit_type]=result.litigant_type  (onClickList)="receiveFuncListData($event)"  class="modal_app"></app-modal-case-litigant>
					<app-datalist-return *ngIf="loadComponent" [items]=list [value1]=listTable [value2]=listFieldId [value3]=listFieldName [value4]=listFieldNull  (onClickList)="receiveFuncListData($event)" class="modal_app"></app-datalist-return>
					<app-modal-guarantor-ffn *ngIf="loadModalGuarComponent" [run_id]=dataHead.run_id (onClickList)="receiveGuarData($event)"></app-modal-guarantor-ffn>
					<app-modal-confirm-ffn *ngIf="loadModalConfirmFfnComponent" ></app-modal-confirm-ffn>
					<app-modal-confirm *ngIf="loadModalConfComponent" class="modal_app"></app-modal-confirm>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button"  class="btn btn btn-primary" (click)="submitModalForm()" *ngIf="loadModalConfComponent">ตกลง</button>
				<button type="button"  class="btn btn btn-primary" (click)="submitConfirmForm()" *ngIf="loadModalConfirmFfnComponent">ตกลง</button>
				<button type="button"  class="btn btn-warning" data-bs-dismiss="modal" (click)="closeModal()">ปิดหน้าจอ</button>
			</div>
		  </div>
		</div>
	</div>

<!--<script src="case-type.component.js"></script>-->
<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">  
	<p style="color: gray">Please Wait. </p>  
</ngx-spinner>

