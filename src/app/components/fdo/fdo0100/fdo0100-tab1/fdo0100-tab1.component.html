<ng-container [formGroup]="formData">
  <table width="100%"  border="0" >
    <tr>
      <td width="19%" align="right">แยกเก็บที่ :&nbsp;</td>
      <td width="31%">
        <div style="float:left;">
          <ng-select  style="width:80px;" [clearable]="false" formControlName="case_title">
            <ng-option *ngFor="let item of dataCase" [value]="item.case_title">{{ item?.case_title_2 }}</ng-option>
          </ng-select>
        </div>
        <div style="float:left;margin-left:3px;"><input type="text" formControlName="case_id"  class="form-control" style="width:60px;" [max]="5" (focus)="runId()" (keyup)="onCancel()" onkeypress="return event.charCode >= 48 && event.charCode <= 57"></div>
        <div style="float: left;margin-left:3px;margin-top:4px;font-size: 20px;">/</div>
        <div style="float:left;margin-left:3px;"><input type="text" formControlName="case_yy" class="form-control" style="width:66px;" [max]="4" onkeypress="return event.charCode >= 48 && event.charCode <= 57"></div>
        <div style="float:left;margin-left:3px;"><button type="button" class="btn btn-primary" (click)="onSearch()">ค้นหา</button></div>
      </td>
      <td width="15%" align="right">&nbsp;</td>
      <td width="35%">&nbsp;</td>
    </tr>
    <tr>
      <td align="right" style="color: red;">วันที่ปลดเผา :&nbsp;</td>
      <td >
        <div style="float:left;"><input type="text" formControlName="burn_date" class="form-control jcalendar burn_date" style="width:120px;" readonly name="burn_date" (click)="directiveDate($event)"></div>
        <div style="float:left;margin-left:3px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;" onClick="$('.burn_date').focus();"></i></div>
          <!-- <div style="float:left;"><input  name="" type="text"   value=""  class="form-control" style="width:120px;"></div>
          <div style="float:left;margin-left:8px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;"></i></div> -->
      </td>
      <td align="right">&nbsp;</td>
      <td >&nbsp;</td>
    </tr>
    <tr>
      <td align="right">หมายเหตุเอกสารแยกเก็บ	:&nbsp;</td>
      <td colspan="3">
        <div style="float: left;">
          <input formControlName="material_remark" type="text" class="form-control" style="width:591px;"/>
        </div>
        <div style="float:left;margin-left:3px;"><button type="button" class="btn btn-success" (click)="saveRemark()">บันทึกหมายเหตุ</button></div>
      </td>
    </tr>
    <tr *ngIf="dataSearchMaterial?.meterial?.material_running">
      <!-- material_running -->
      <td align="right">ผู้บันทึกเอกสารแยกเก็บ :&nbsp;</td>
      <td colspan="3">&nbsp;&nbsp;<u>{{dataSearchMaterial?.meterial?.create_user}}</u> วันที่บันทึก <u>{{dataSearchMaterial?.meterial?.create_date}}</u></td>
    </tr>
    <!--
    <tr>
      <td align="right">ผู้ขอเลขเอกสารแยกเก็บ	:&nbsp;</td>
      <td >
        <div style="float: left;">
          <input formControlName="req_user_id" type="text" class="form-control" style="width:60px;"/>
        </div>
        <div style="float: left;margin-left:2px;">
          <input formControlName="req_user_name" type="text" class="form-control" style="width:255px;" readonly/>
        </div>
        <div style="float: left;margin-left:2px;margin-top:2px;" >
          <i class="far fa-list-alt" style="font-size: 20px;margin-left:2px;" (click)="openReqUser()"></i>
        </div>
      </td>
      <td align="right">หน่วยงานที่ขอ :&nbsp;</td>
      <td >
        <div style="float: left;">
          <input formControlName="req_dep_code" type="text" class="form-control" style="width:60px;"/>
        </div>
        <div style="float: left;margin-left:2px;">
          <input formControlName="req_dep_name" type="text" class="form-control" style="width:255px;" readonly/>
        </div>
        <div style="float: left;margin-left:2px;margin-top:2px;" >
          <i class="far fa-list-alt" style="font-size: 20px;margin-left:2px;" (click)="openReqDep()"></i>
        </div>
      </td>
    </tr>
    -->
    <tr>
      <td align="right">เจ้าของเอกสาร :&nbsp;</td>
      <td >
        <div style="float:left;">
          <ng-select  style="width:120px;" [clearable]="false" formControlName="lit_type">
            <ng-option *ngFor="let item of dataReqType" [value]="item.fieldIdValue">{{ item?.fieldNameValue }}</ng-option>
          </ng-select>
        </div>
        <div style="float: left;margin-left:15px;margin-top:4px;">เอกสารลำดับที่ :&nbsp;</div>
        <div style="float: left;">
          <input formControlName="item" type="text" class="form-control" style="width:60px;"/>
        </div>
        <input formControlName="material_item" type="hidden" class="form-control" style="width:60px;"/>
      </td>
      <td align="right">เอกสารต้องคืนคู่ความ :&nbsp;</td>
      <td >
        <div style="float: left;">
          <input formControlName="due_return" type="checkbox" style="width:15px;height:15px;"/>
        </div>
      </td>
    </tr>
    <tr>
      <td align="right">วันที่เก็บ :&nbsp;</td>
      <td >
        <div style="float:left;"><input type="text" formControlName="keep_date" class="form-control jcalendar keep_date" style="width:120px;" name="keep_date" (click)="directiveDate($event)"></div>
        <div style="float:left;margin-left:3px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;" onClick="$('.keep_date').focus();"></i></div>
          <!-- <div style="float:left;"><input  name="" type="text"   value=""  class="form-control" style="width:120px;"></div>
          <div style="float:left;margin-left:8px;margin-top:5px;"><i class="fa fa-calendar" style="font-size: 16px;"></i></div> -->
      </td>
      <td align="right">เอกสารหมาย :&nbsp;</td>
      <td >
          <div style="float:left;"><input formControlName="doc_no" type="text" class="form-control" style="width:120px;"></div>
      </td>
    </tr>
    <tr>
    <td align="right">เก็บลงในที่ :&nbsp;</td>
    <td colspan="3">
      <div style="float:left;">
        <ng-select  style="width:100px;" [clearable]="false" formControlName="keep_in">
          <ng-option *ngFor="let item of dataKeep" [value]="item.fieldIdValue">{{ item?.fieldNameValue }}</ng-option>
        </ng-select>
      </div>
      <div style="float: left;margin-left:15px;margin-top:4px;">ที่ :&nbsp;</div>
      <div style="float: left;">
        <input formControlName="wad_no" type="text" class="form-control" style="width:60px;"/>
      </div>
      <div style="float: left;margin-left:15px;margin-top:4px;">จำนวน :&nbsp;</div>
      <div style="float: left;">
        <input formControlName="page_no" type="text" class="form-control" style="width:80px;"/>
      </div>
      <div style="float: left;margin-left:10px;margin-top:4px;">แผ่น&nbsp;</div>
    </td>
    </tr>
    <tr>
      <td align="right">รับจากใคร :&nbsp;</td>
      <td colspan="3">
        <div style="float: left;margin-top:0px;" >
          <input formControlName="receipt_from" type="text" class="form-control" style="width:220px;"/>
        </div>
      </td>
    </tr>
    <tr>
      <td align="right">รายละเอียด :&nbsp;</td>
      <td colspan="3">
        <div style="float: left;margin-top:0px;" >
          <textarea formControlName="doc_desc" class="form-control" style="width: 581px; height: 72px; line-height: 18px;overflow-wrap: break-word;"></textarea>
        </div>
      </td>
    </tr>
    <tr>
      <td align="right">หมายเหตุ :&nbsp;</td>
      <td colspan="3">
        <div style="float: left;margin-top:0px;" >
          <textarea formControlName="remark" class="form-control" style="width: 581px; height: 38px; line-height: 18px;overflow-wrap: break-word;"></textarea>
        </div>
      </td>
    </tr>
    <tr>
      <td align="right">วันที่คืนคู่ความ :&nbsp;</td>
      <td colspan="3">
        <div style="float: left;">
          <input  formControlName="open_date" type="text" readonly class="form-control" style="width:120px;"/>
        </div>
      </td>
  </tr>
  </table>
</ng-container>
<!-- <div class="card-footer" style="margin-top: 5px;text-align:center;"> -->
<div class="d-flex justify-content-center mt-3 mb-3">
  <button type="button" class="btn btn-success" (click)="onSave()">จัดเก็บ</button>
  <button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="addNewDocument()">เพิ่ม</button>
  <!--<button type="button" class="btn btn-primary" style="margin-left:5px;"  >บันทึกขอตรวจเอกสาร</button>
  <button type="button" class="btn btn-primary" style="margin-left:5px;"  >ตรวจสอบเอกสาร</button>-->
  <button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="printReport(1)">พิมพ์สารบาญ</button>
  <button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="printReport(2)">พิมพ์สารบาญตามช่วง</button>
  <button type="button" class="btn btn-primary" style="margin-left:5px;"  (click)="printReport(3)">พิมพ์ปกเอกสาร</button>
  <button type="button" class="btn btn-danger" style="margin-left:5px;" (click)="onDelCaseMaterial()" *ngIf="dataSearchMaterial?.meterial?.material_running">ลบข้อมูลเอกสารแยกเก็บ</button>
</div>

<div class="card " style="box-shadow: none !important;padding:5px;background-color: #f0f0f0;margin-top:10px;">
  <table datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTrigger" class="table table-striped table-bordered table-sm row-border hover">
    <thead>
      <tr>
        <th width="3%" height="26" class="no-sort">&nbsp;</th>
        <th width="3%" class="no-sort">&nbsp;</th>
        <th width="5%" height="26" >แยกเก็บที่</th>
        <th width="7%" align="center" >เจ้าของ</th>
        <th width="4%" align="center" >ลำดับที่</th>
        <th width="6%" align="center" >ต้องคืนคู่ความ</th>
        <th width="5%" align="center" >เลขที่หมาย</th>
        <th width="5%" align="center" >วันที่เก็บ</th>
        <th width="8%" align="center" >เก็บลง</th>
        <th width="3%" >ที่</th>
        <th width="3%">แผ่น</th>
        <th width="12%" >รายละเอียด</th>
        <th width="6%">หน่วยงานที่บันทึก</th>
        <th width="6%">ผู้บันทึก</th>
        <th width="6%">วัน/เวลาที่บันทึก</th>
        <th width="6%">หน่วยงานที่แก้ไข</th>
        <th width="6%">ผู้แก้ไข</th>
        <th width="6%">วัน/เวลาที่แก้ไข</th>
      </tr>
    </thead>

    <tbody *ngIf="dataSearchMaterial?.table?.length > 0">
      <tr *ngFor="let item of dataSearchMaterial?.table">
        <td><button class="btn" (click)="onDelMaterial(item)"><i class="fa fa-close" style="cursor:pointer;font-size:20px;color:#d50000d1;"></i></button></td>
        <td><button class="btn" (click)="onEditMaterial(item,'')"><i class="fas fa-pencil-alt"></i></button></td>
        <td>{{ item?.case_title }}{{item?.case_id}}/{{item?.case_yy}}</td>
        <td>{{ item?.lit_type_desc }}</td>
        <td>{{ item?.item }}</td>
        <td align="center"><i class="fas fa-check text-success" *ngIf="item.due_return == '1'"></i></td>
        <td>{{ item?.doc_no }}</td>
        <td>{{ item?.keep_date }}</td>
        <td>{{ item?.keep_in }}</td>
        <td>{{ item?.wad_no }}</td>
        <td>{{ item?.page_no }}</td>
        <td>{{ item?.doc_desc }}</td>
        <td>{{ item?.create_dep_name }}</td>
        <td>{{ item?.create_user }}</td>
        <td>{{ item?.create_date }}</td>
        <td>{{ item?.update_dep_name }}</td>
        <td>{{ item?.update_user }}</td>
        <td>{{ item?.update_date }}</td>
      </tr>
    </tbody>
    <tbody>
      <tr *ngIf="dataSearchMaterial?.table?.length <= 0">
        <td colspan="18" style="color:red;text-align: center;" class="no-data-available">###### ไม่พบข้อมูล #######</td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>

        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>

        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>

        <td style="display:none;"></td>
        <td style="display:none;"></td>
        <td style="display:none;"></td>

      </tr>
    </tbody>
  </table>
</div>
